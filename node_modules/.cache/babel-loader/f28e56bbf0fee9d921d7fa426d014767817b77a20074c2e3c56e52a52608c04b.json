{"ast":null,"code":"var _jsxFileName = \"/Users/anna/Desktop/frontendinzynierka/src/components/Home.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport DatePicker from 'react-datepicker';\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport styled from 'styled-components';\nimport { jwtDecode } from 'jwt-decode';\n\n// Styl głównego kontenera\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst HomeContainer = styled.div`\n  display: flex;\n  justify-content: flex-start;\n  align-items: flex-start;\n  min-height: 100vh;\n  background-color: #f5f5f5;\n  padding: 20px;\n  flex-direction: row;\n  flex-wrap: wrap; /* Allows for wrapping content if necessary */\n`;\n\n// Kolumna lewa\n_c = HomeContainer;\nconst LeftColumn = styled.div`\n  flex: 0 0 400px; \n  max-width: 400px; \n  margin-right: 20px;\n`;\n\n// Kolumna prawa\n_c2 = LeftColumn;\nconst RightColumn = styled.div`\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  width: 100%;\n  height: 100%;\n  padding-bottom: 20px; /* Gives room for the form at the bottom */\n`;\n\n// Formularz zgłoszeniowy na dole\n_c3 = RightColumn;\nconst FullWidthFormWrapper = styled.div`\n  background: #fff;\n  padding: 30px;\n  border-radius: 10px;\n  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);\n  width: 100%; \n  margin-top: 20px; /* Adds space above the form */\n  box-sizing: border-box;\n  position: relative; /* Keeps it in the flow without absolute positioning */\n`;\n\n// Tytuł formularza\n_c4 = FullWidthFormWrapper;\nconst FormTitle = styled.h2`\n  text-align: center;\n  color: #01295F;\n  margin-bottom: 20px;\n`;\n\n// Sekcja formularza\n_c5 = FormTitle;\nconst FormSection = styled.div`\n  margin-bottom: 20px;\n\n  label {\n    display: block;\n    color: #333;\n    margin-bottom: 10px;\n  }\n\n  input, textarea {\n    width: 100%;\n    padding: 10px;\n    font-size: 16px;\n    border: 1px solid #ccc;\n    border-radius: 5px;\n    outline: none;\n\n    &:focus {\n      border-color: #00509E;\n      box-shadow: 0 0 5px rgba(0, 80, 158, 0.5);\n    }\n  }\n`;\n\n// Przycisk formularza\n_c6 = FormSection;\nconst FormButton = styled.button`\n  background-color: #01295F;\n  color: white;\n  padding: 15px;\n  border: none;\n  border-radius: 5px;\n  cursor: pointer;\n  font-size: 16px;\n  width: 100%;\n  transition: background-color 0.3s ease;\n\n  &:hover {\n    background-color: #00509E;\n  }\n\n  &:disabled {\n    background-color: #aaa;\n    cursor: not-allowed;\n  }\n`;\n\n// Karta główna\n_c7 = FormButton;\nconst Card = styled.div`\n  background: #fff;\n  padding: 30px;\n  border-radius: 10px;\n  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);\n`;\n_c8 = Card;\nconst Title = styled.h2`\n  text-align: center;\n  color: #01295F;\n  margin-bottom: 20px;\n`;\n\n// Sekcja z marginesami\n_c9 = Title;\nconst Section = styled.div`\n  margin-bottom: 20px;\n\n  h3 {\n    color: #333;\n    margin-bottom: 10px;\n  }\n\n  select, input {\n    width: 100%;\n    padding: 10px;\n    font-size: 16px;\n    border: 1px solid #ccc;\n    border-radius: 5px;\n    outline: none;\n\n    &:focus {\n      border-color: #00509E;\n      box-shadow: 0 0 5px rgba(0, 80, 158, 0.5);\n    }\n  }\n`;\n\n// Opakowanie kalendarza\n_c10 = Section;\nconst CalendarWrapper = styled.div`\n  margin-bottom: 20px;\n  \n  .react-datepicker__input-container {\n    width: 100%;\n  }\n`;\n\n// Define styled-components for your UI\n_c11 = CalendarWrapper;\nconst Button = styled.button`\n  background-color: #01295F;\n  color: white;\n  padding: 15px;\n  border: none;\n  border-radius: 5px;\n  cursor: pointer;\n  font-size: 16px;\n  width: 100%;\n  transition: background-color 0.3s ease;\n\n  &:hover {\n    background-color: #00509E;\n  }\n\n  &:disabled {\n    background-color: #aaa;\n    cursor: not-allowed;\n  }\n`;\n_c12 = Button;\nconst Image = styled.img`\n  width: 100%;\n  height: auto;\n  border-radius: 10px;\n  object-fit: cover;\n  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);\n`;\n_c13 = Image;\nconst Opis = styled.p`\n  font-size: 18px;\n`;\n_c14 = Opis;\nfunction Home() {\n  _s();\n  const [date, setDate] = useState(new Date());\n  const [selectedTime, setSelectedTime] = useState('');\n  const [availableHours, setAvailableHours] = useState([]);\n  const [selectedService, setSelectedService] = useState('');\n  const [services, setServices] = useState([]);\n  const [vehicles, setVehicles] = useState([]);\n  const [selectedVehicle, setSelectedVehicle] = useState('');\n  const [workshops, setWorkshops] = useState([]);\n  const [selectedWorkshop, setSelectedWorkshop] = useState('');\n  const [user, setUser] = useState(null);\n  const [email, setEmail] = useState('');\n  const [title, setTitle] = useState('');\n  const [description, setDescription] = useState('');\n  const token = localStorage.getItem('token');\n  const userId = token ? jwtDecode(token).nameid : null;\n  useEffect(() => {\n    if (!userId || !token) return;\n    const fetchUserData = async () => {\n      try {\n        const [userResponse, vehiclesResponse] = await Promise.all([axios.get(`http://localhost:5109/api/user/${userId}`, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        }), axios.get(`http://localhost:5109/api/user/${userId}/vehicles`, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        })]);\n        setUser(userResponse.data);\n        setVehicles(vehiclesResponse.data);\n        // If the user data contains an email, set it in the email state\n        if (userResponse.data.email) {\n          setEmail(userResponse.data.email);\n        }\n      } catch (error) {\n        var _error$response;\n        console.error('Error fetching user data:', ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data) || error.message);\n      }\n    };\n    fetchUserData();\n  }, [userId, token]);\n  useEffect(() => {\n    const fetchWorkshops = async () => {\n      try {\n        const response = await axios.get('http://localhost:5109/api/AutoRepairShop/workshops');\n        setWorkshops(response.data);\n      } catch (error) {\n        console.error('Error fetching workshops:', error);\n      }\n    };\n    fetchWorkshops();\n  }, []);\n  const handleDateChange = async selectedDate => {\n    setDate(selectedDate);\n    if (selectedWorkshop) {\n      await fetchAvailableHours(selectedDate);\n    }\n  };\n  const fetchAvailableHours = async selectedDate => {\n    if (!selectedWorkshop) return;\n    try {\n      const response = await axios.get(`http://localhost:5109/api/AutoRepairShop/${selectedWorkshop}/terms`, {\n        params: {\n          date: selectedDate.toISOString()\n        }\n      });\n      setAvailableHours(response.data);\n    } catch (error) {\n      console.error('Error fetching available hours:', error);\n    }\n  };\n  const handleWorkshopChange = async e => {\n    const workshopId = e.target.value;\n    setSelectedWorkshop(workshopId);\n    setAvailableHours([]);\n    setServices([]);\n    if (workshopId && date) {\n      await fetchAvailableHours(date);\n    }\n    try {\n      const response = await axios.get(`http://localhost:5109/api/AutoRepairShop/${workshopId}/favours`);\n      setServices(response.data);\n    } catch (error) {\n      console.error('Error fetching services:', error);\n    }\n  };\n  const handleSubmit = async () => {\n    if (!selectedTime || !selectedVehicle || !selectedService || !selectedWorkshop) {\n      alert('Proszę wypełnić wszystkie pola.');\n      return;\n    }\n    const selectedHour = availableHours.find(hour => String(hour.id) === String(selectedTime));\n    if (!selectedHour) {\n      alert('Nieprawidłowa godzina');\n      return;\n    }\n    const selectedDateTime = new Date(selectedHour.startDate);\n    const recordDate = selectedDateTime.toISOString();\n    const completionDate = selectedHour.endDate;\n    try {\n      await axios.post('http://localhost:5109/api/AutoRepairShop/add-record', {\n        vehicleId: selectedVehicle,\n        favourId: selectedService,\n        termId: selectedTime,\n        recordDate: recordDate,\n        completionDate: completionDate,\n        workshopId: selectedWorkshop\n      });\n      alert('Wizyta została umówiona!');\n    } catch (error) {\n      console.error('Error scheduling appointment:', error);\n      alert('Nie udało się umówić wizyty.');\n    }\n  };\n  const handleSubmitForm = async () => {\n    // Walidacja formularza\n    if (!email || !title || !description) {\n      alert('Proszę wypełnić wszystkie pola.');\n      return;\n    }\n    try {\n      await axios.post('http://localhost:5109/api/AutoRepairShop/create-issue', {\n        email,\n        title,\n        description\n      });\n      alert('Zgłoszenie zostało wysłane!');\n      setEmail('');\n      setTitle('');\n      setDescription('');\n    } catch (error) {\n      console.error('Error submitting form:', error);\n      alert('Nie udało się wysłać zgłoszenia.');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(HomeContainer, {\n      children: [/*#__PURE__*/_jsxDEV(LeftColumn, {\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          children: [/*#__PURE__*/_jsxDEV(Title, {\n            children: \"Um\\xF3w wizyt\\u0119\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 345,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(CalendarWrapper, {\n            children: /*#__PURE__*/_jsxDEV(Section, {\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                children: \"Wybierz dat\\u0119 naprawy\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 348,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(DatePicker, {\n                selected: date,\n                onChange: handleDateChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 349,\n                columnNumber: 15\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 347,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 346,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(Section, {\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"Wybierz warsztat\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 353,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              value: selectedWorkshop,\n              onChange: handleWorkshopChange,\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"Wybierz warsztat\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 355,\n                columnNumber: 15\n              }, this), workshops.map(workshop => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: workshop.id,\n                children: workshop.address\n              }, workshop.id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 357,\n                columnNumber: 17\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 354,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 352,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(Section, {\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"Wybierz godzin\\u0119\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 364,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              value: selectedTime,\n              onChange: e => setSelectedTime(e.target.value),\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"Wybierz godzin\\u0119\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 366,\n                columnNumber: 15\n              }, this), availableHours.map(hour => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: hour.id,\n                children: new Date(hour.startDate).toLocaleTimeString('pl-PL', {\n                  hour: '2-digit',\n                  minute: '2-digit'\n                })\n              }, hour.id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 368,\n                columnNumber: 17\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 365,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 363,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(Section, {\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"Wybierz us\\u0142ug\\u0119\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 378,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              value: selectedService,\n              onChange: e => setSelectedService(e.target.value),\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"Wybierz us\\u0142ug\\u0119\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 380,\n                columnNumber: 15\n              }, this), services.map(service => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: service.id,\n                children: service.typeName\n              }, service.id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 382,\n                columnNumber: 17\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 379,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 377,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(Section, {\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"Wybierz pojazd\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 389,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              value: selectedVehicle,\n              onChange: e => setSelectedVehicle(e.target.value),\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"Wybierz pojazd\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 391,\n                columnNumber: 15\n              }, this), vehicles.map(vehicle => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: vehicle.id,\n                children: [vehicle.brand, \" \", vehicle.model, \" \", vehicle.registrationNumber]\n              }, vehicle.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 393,\n                columnNumber: 17\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 390,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 388,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            onClick: handleSubmit,\n            children: \"Um\\xF3w wizyt\\u0119\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 399,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 344,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 343,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(RightColumn, {\n        children: [/*#__PURE__*/_jsxDEV(Image, {\n          src: \"https://imgs.search.brave.com/3ZISgELlSj7O93BAdJHpQEWYOWfhD3HPxSgc2pAo4l4/rs:fit:860:0:0:0/g:ce/aHR0cHM6Ly9pbWcu/ZnJlZXBpay5jb20v/cHJlbWl1bS16ZGpl/Y2llL21lY2hhbmlr/LXNhbW9jaG9kb3d5/LW5hcHJhd2lhamFj/eS1zYW1vY2hvZC13/LXdhcnN6dGFjaWUt/c2Ftb2Nob2Rvd3lt/Xzc0MjMzOS0xMzgx/LmpwZz9zZW10PWFp/c19oeWJyaWQ\",\n          width: 100000,\n          alt: \"Warsztat samochodowy\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 403,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Opis, {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Pan Alternator \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 404,\n            columnNumber: 15\n          }, this), \" to serwis, kt\\xF3ry zapewni Ci komfort umawiania wizyt w warsztatach samochosowych bez konieczno\\u015Bci wychodzenia z domu!\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 404,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Opis, {\n          children: \"Najlepsze warsztaty i najlepsi mechanicy, kt\\xF3rzy znaj\\u0105 si\\u0119 na wszystkim,  co zwi\\u0105zane z autami. Um\\xF3w wizyt\\u0119 ju\\u017C dzi\\u015B!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 407,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 402,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 342,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(FullWidthFormWrapper, {\n      children: [/*#__PURE__*/_jsxDEV(FormTitle, {\n        children: \"Formularz zg\\u0142oszeniowy\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 414,\n        columnNumber: 1\n      }, this), /*#__PURE__*/_jsxDEV(FormSection, {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"email\",\n          children: \"Email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 416,\n          columnNumber: 3\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"email\",\n          id: \"email\",\n          value: email,\n          onChange: e => setEmail(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 417,\n          columnNumber: 3\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 415,\n        columnNumber: 1\n      }, this), /*#__PURE__*/_jsxDEV(FormSection, {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"title\",\n          children: \"Tytu\\u0142 zg\\u0142oszenia\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 425,\n          columnNumber: 3\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          id: \"title\",\n          value: title,\n          onChange: e => setTitle(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 426,\n          columnNumber: 3\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 424,\n        columnNumber: 1\n      }, this), /*#__PURE__*/_jsxDEV(FormSection, {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"description\",\n          children: \"Opis problemu\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 434,\n          columnNumber: 3\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          id: \"description\",\n          rows: \"4\",\n          value: description,\n          onChange: e => setDescription(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 435,\n          columnNumber: 3\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 433,\n        columnNumber: 1\n      }, this), /*#__PURE__*/_jsxDEV(FormButton, {\n        onClick: handleSubmitForm,\n        children: \"Wy\\u015Blij zg\\u0142oszenie\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 442,\n        columnNumber: 1\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 413,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true);\n}\n_s(Home, \"4M2TE+KXFQh1zM30HO4MGQCqwYY=\");\n_c15 = Home;\nexport default Home;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c10, _c11, _c12, _c13, _c14, _c15;\n$RefreshReg$(_c, \"HomeContainer\");\n$RefreshReg$(_c2, \"LeftColumn\");\n$RefreshReg$(_c3, \"RightColumn\");\n$RefreshReg$(_c4, \"FullWidthFormWrapper\");\n$RefreshReg$(_c5, \"FormTitle\");\n$RefreshReg$(_c6, \"FormSection\");\n$RefreshReg$(_c7, \"FormButton\");\n$RefreshReg$(_c8, \"Card\");\n$RefreshReg$(_c9, \"Title\");\n$RefreshReg$(_c10, \"Section\");\n$RefreshReg$(_c11, \"CalendarWrapper\");\n$RefreshReg$(_c12, \"Button\");\n$RefreshReg$(_c13, \"Image\");\n$RefreshReg$(_c14, \"Opis\");\n$RefreshReg$(_c15, \"Home\");","map":{"version":3,"names":["React","useState","useEffect","axios","DatePicker","styled","jwtDecode","jsxDEV","_jsxDEV","Fragment","_Fragment","HomeContainer","div","_c","LeftColumn","_c2","RightColumn","_c3","FullWidthFormWrapper","_c4","FormTitle","h2","_c5","FormSection","_c6","FormButton","button","_c7","Card","_c8","Title","_c9","Section","_c10","CalendarWrapper","_c11","Button","_c12","Image","img","_c13","Opis","p","_c14","Home","_s","date","setDate","Date","selectedTime","setSelectedTime","availableHours","setAvailableHours","selectedService","setSelectedService","services","setServices","vehicles","setVehicles","selectedVehicle","setSelectedVehicle","workshops","setWorkshops","selectedWorkshop","setSelectedWorkshop","user","setUser","email","setEmail","title","setTitle","description","setDescription","token","localStorage","getItem","userId","nameid","fetchUserData","userResponse","vehiclesResponse","Promise","all","get","headers","Authorization","data","error","_error$response","console","response","message","fetchWorkshops","handleDateChange","selectedDate","fetchAvailableHours","params","toISOString","handleWorkshopChange","e","workshopId","target","value","handleSubmit","alert","selectedHour","find","hour","String","id","selectedDateTime","startDate","recordDate","completionDate","endDate","post","vehicleId","favourId","termId","handleSubmitForm","children","fileName","_jsxFileName","lineNumber","columnNumber","selected","onChange","map","workshop","address","toLocaleTimeString","minute","service","typeName","vehicle","brand","model","registrationNumber","onClick","src","width","alt","htmlFor","type","rows","_c15","$RefreshReg$"],"sources":["/Users/anna/Desktop/frontendinzynierka/src/components/Home.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport DatePicker from 'react-datepicker';\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport styled from 'styled-components';\nimport { jwtDecode } from 'jwt-decode';\n\n// Styl głównego kontenera\nconst HomeContainer = styled.div`\n  display: flex;\n  justify-content: flex-start;\n  align-items: flex-start;\n  min-height: 100vh;\n  background-color: #f5f5f5;\n  padding: 20px;\n  flex-direction: row;\n  flex-wrap: wrap; /* Allows for wrapping content if necessary */\n`;\n\n// Kolumna lewa\nconst LeftColumn = styled.div`\n  flex: 0 0 400px; \n  max-width: 400px; \n  margin-right: 20px;\n`;\n\n// Kolumna prawa\nconst RightColumn = styled.div`\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  width: 100%;\n  height: 100%;\n  padding-bottom: 20px; /* Gives room for the form at the bottom */\n`;\n\n// Formularz zgłoszeniowy na dole\nconst FullWidthFormWrapper = styled.div`\n  background: #fff;\n  padding: 30px;\n  border-radius: 10px;\n  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);\n  width: 100%; \n  margin-top: 20px; /* Adds space above the form */\n  box-sizing: border-box;\n  position: relative; /* Keeps it in the flow without absolute positioning */\n`;\n\n// Tytuł formularza\nconst FormTitle = styled.h2`\n  text-align: center;\n  color: #01295F;\n  margin-bottom: 20px;\n`;\n\n// Sekcja formularza\nconst FormSection = styled.div`\n  margin-bottom: 20px;\n\n  label {\n    display: block;\n    color: #333;\n    margin-bottom: 10px;\n  }\n\n  input, textarea {\n    width: 100%;\n    padding: 10px;\n    font-size: 16px;\n    border: 1px solid #ccc;\n    border-radius: 5px;\n    outline: none;\n\n    &:focus {\n      border-color: #00509E;\n      box-shadow: 0 0 5px rgba(0, 80, 158, 0.5);\n    }\n  }\n`;\n\n// Przycisk formularza\nconst FormButton = styled.button`\n  background-color: #01295F;\n  color: white;\n  padding: 15px;\n  border: none;\n  border-radius: 5px;\n  cursor: pointer;\n  font-size: 16px;\n  width: 100%;\n  transition: background-color 0.3s ease;\n\n  &:hover {\n    background-color: #00509E;\n  }\n\n  &:disabled {\n    background-color: #aaa;\n    cursor: not-allowed;\n  }\n`;\n\n// Karta główna\nconst Card = styled.div`\n  background: #fff;\n  padding: 30px;\n  border-radius: 10px;\n  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);\n`;\n\nconst Title = styled.h2`\n  text-align: center;\n  color: #01295F;\n  margin-bottom: 20px;\n`;\n\n// Sekcja z marginesami\nconst Section = styled.div`\n  margin-bottom: 20px;\n\n  h3 {\n    color: #333;\n    margin-bottom: 10px;\n  }\n\n  select, input {\n    width: 100%;\n    padding: 10px;\n    font-size: 16px;\n    border: 1px solid #ccc;\n    border-radius: 5px;\n    outline: none;\n\n    &:focus {\n      border-color: #00509E;\n      box-shadow: 0 0 5px rgba(0, 80, 158, 0.5);\n    }\n  }\n`;\n\n// Opakowanie kalendarza\nconst CalendarWrapper = styled.div`\n  margin-bottom: 20px;\n  \n  .react-datepicker__input-container {\n    width: 100%;\n  }\n`;\n\n// Define styled-components for your UI\nconst Button = styled.button`\n  background-color: #01295F;\n  color: white;\n  padding: 15px;\n  border: none;\n  border-radius: 5px;\n  cursor: pointer;\n  font-size: 16px;\n  width: 100%;\n  transition: background-color 0.3s ease;\n\n  &:hover {\n    background-color: #00509E;\n  }\n\n  &:disabled {\n    background-color: #aaa;\n    cursor: not-allowed;\n  }\n`;\n\nconst Image = styled.img`\n  width: 100%;\n  height: auto;\n  border-radius: 10px;\n  object-fit: cover;\n  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);\n`;\n\nconst Opis = styled.p`\n  font-size: 18px;\n`;\n\n\nfunction Home() {\n  const [date, setDate] = useState(new Date());\n  const [selectedTime, setSelectedTime] = useState('');\n  const [availableHours, setAvailableHours] = useState([]);\n  const [selectedService, setSelectedService] = useState('');\n  const [services, setServices] = useState([]);\n  const [vehicles, setVehicles] = useState([]);\n  const [selectedVehicle, setSelectedVehicle] = useState('');\n  const [workshops, setWorkshops] = useState([]);\n  const [selectedWorkshop, setSelectedWorkshop] = useState('');\n  const [user, setUser] = useState(null);\n\n  const [email, setEmail] = useState('');\n  const [title, setTitle] = useState('');\n  const [description, setDescription] = useState('');\n\n  const token = localStorage.getItem('token');\n  const userId = token ? jwtDecode(token).nameid : null;\n\n  useEffect(() => {\n    if (!userId || !token) return;\n\n    const fetchUserData = async () => {\n      try {\n        const [userResponse, vehiclesResponse] = await Promise.all([\n          axios.get(`http://localhost:5109/api/user/${userId}`, {\n            headers: { Authorization: `Bearer ${token}` },\n          }),\n          axios.get(`http://localhost:5109/api/user/${userId}/vehicles`, {\n            headers: { Authorization: `Bearer ${token}` },\n          }),\n        ]);\n\n        setUser(userResponse.data);\n        setVehicles(vehiclesResponse.data);\n        // If the user data contains an email, set it in the email state\n        if (userResponse.data.email) {\n          setEmail(userResponse.data.email);\n        }\n      } catch (error) {\n        console.error('Error fetching user data:', error.response?.data || error.message);\n      }\n    };\n\n    fetchUserData();\n  }, [userId, token]);\n\n  useEffect(() => {\n    const fetchWorkshops = async () => {\n      try {\n        const response = await axios.get('http://localhost:5109/api/AutoRepairShop/workshops');\n        setWorkshops(response.data);\n      } catch (error) {\n        console.error('Error fetching workshops:', error);\n      }\n    };\n\n    fetchWorkshops();\n  }, []);\n\n  const handleDateChange = async (selectedDate) => {\n    setDate(selectedDate);\n    if (selectedWorkshop) {\n      await fetchAvailableHours(selectedDate);\n    }\n  };\n\n  const fetchAvailableHours = async (selectedDate) => {\n    if (!selectedWorkshop) return;\n\n    try {\n      const response = await axios.get(\n        `http://localhost:5109/api/AutoRepairShop/${selectedWorkshop}/terms`,\n        { params: { date: selectedDate.toISOString() } }\n      );\n      setAvailableHours(response.data);\n    } catch (error) {\n      console.error('Error fetching available hours:', error);\n    }\n  };\n\n  const handleWorkshopChange = async (e) => {\n    const workshopId = e.target.value;\n    setSelectedWorkshop(workshopId);\n    setAvailableHours([]);\n    setServices([]);\n\n    if (workshopId && date) {\n      await fetchAvailableHours(date);\n    }\n\n    try {\n      const response = await axios.get(`http://localhost:5109/api/AutoRepairShop/${workshopId}/favours`);\n      setServices(response.data);\n    } catch (error) {\n      console.error('Error fetching services:', error);\n    }\n  };\n\n  const handleSubmit = async () => {\n    if (!selectedTime || !selectedVehicle || !selectedService || !selectedWorkshop) {\n      alert('Proszę wypełnić wszystkie pola.');\n      return;\n    }\n\n    const selectedHour = availableHours.find((hour) => String(hour.id) === String(selectedTime));\n    if (!selectedHour) {\n      alert('Nieprawidłowa godzina');\n      return;\n    }\n\n    const selectedDateTime = new Date(selectedHour.startDate);\n    const recordDate = selectedDateTime.toISOString();\n    const completionDate = selectedHour.endDate;\n\n    try {\n      await axios.post('http://localhost:5109/api/AutoRepairShop/add-record', {\n        vehicleId: selectedVehicle,\n        favourId: selectedService,\n        termId: selectedTime,\n        recordDate: recordDate,\n        completionDate: completionDate,\n        workshopId: selectedWorkshop,\n      });\n      alert('Wizyta została umówiona!');\n    } catch (error) {\n      console.error('Error scheduling appointment:', error);\n      alert('Nie udało się umówić wizyty.');\n    }\n  };\n\n  const handleSubmitForm = async () => {\n    // Walidacja formularza\n    if (!email || !title || !description) {\n      alert('Proszę wypełnić wszystkie pola.');\n      return;\n    }\n\n    try {\n      await axios.post('http://localhost:5109/api/AutoRepairShop/create-issue', {\n        email,\n        title,\n        description,\n      });\n      alert('Zgłoszenie zostało wysłane!');\n      setEmail('');\n      setTitle('');\n      setDescription('');\n    } catch (error) {\n      console.error('Error submitting form:', error);\n      alert('Nie udało się wysłać zgłoszenia.');\n    }\n  };\n\n  return (\n    <>\n    <HomeContainer>\n      <LeftColumn>\n        <Card>\n          <Title>Umów wizytę</Title>\n          <CalendarWrapper>\n            <Section>\n              <h3>Wybierz datę naprawy</h3>\n              <DatePicker selected={date} onChange={handleDateChange} />\n            </Section>\n          </CalendarWrapper>\n          <Section>\n            <h3>Wybierz warsztat</h3>\n            <select value={selectedWorkshop} onChange={handleWorkshopChange}>\n              <option value=\"\">Wybierz warsztat</option>\n              {workshops.map((workshop) => (\n                <option key={workshop.id} value={workshop.id}>\n                  {workshop.address}\n                </option>\n              ))}\n            </select>\n          </Section>\n          <Section>\n            <h3>Wybierz godzinę</h3>\n            <select value={selectedTime} onChange={(e) => setSelectedTime(e.target.value)}>\n              <option value=\"\">Wybierz godzinę</option>\n              {availableHours.map((hour) => (\n                <option key={hour.id} value={hour.id}>\n                  {new Date(hour.startDate).toLocaleTimeString('pl-PL', {\n                    hour: '2-digit',\n                    minute: '2-digit',\n                  })}\n                </option>\n              ))}\n            </select>\n          </Section>\n          <Section>\n            <h3>Wybierz usługę</h3>\n            <select value={selectedService} onChange={(e) => setSelectedService(e.target.value)}>\n              <option value=\"\">Wybierz usługę</option>\n              {services.map((service) => (\n                <option key={service.id} value={service.id}>\n                  {service.typeName}\n                </option>\n              ))}\n            </select>\n          </Section>\n          <Section>\n            <h3>Wybierz pojazd</h3>\n            <select value={selectedVehicle} onChange={(e) => setSelectedVehicle(e.target.value)}>\n              <option value=\"\">Wybierz pojazd</option>\n              {vehicles.map((vehicle) => (\n                <option key={vehicle.id} value={vehicle.id}>\n                  {vehicle.brand} {vehicle.model} {vehicle.registrationNumber}\n                </option>\n              ))}\n            </select>\n          </Section>\n          <Button onClick={handleSubmit}>Umów wizytę</Button>\n        </Card>\n      </LeftColumn>\n      <RightColumn>\n        <Image src=\"https://imgs.search.brave.com/3ZISgELlSj7O93BAdJHpQEWYOWfhD3HPxSgc2pAo4l4/rs:fit:860:0:0:0/g:ce/aHR0cHM6Ly9pbWcu/ZnJlZXBpay5jb20v/cHJlbWl1bS16ZGpl/Y2llL21lY2hhbmlr/LXNhbW9jaG9kb3d5/LW5hcHJhd2lhamFj/eS1zYW1vY2hvZC13/LXdhcnN6dGFjaWUt/c2Ftb2Nob2Rvd3lt/Xzc0MjMzOS0xMzgx/LmpwZz9zZW10PWFp/c19oeWJyaWQ\" width={100000} alt=\"Warsztat samochodowy\" />\n        <Opis><strong>Pan Alternator </strong> to serwis, który zapewni Ci komfort umawiania wizyt w warsztatach samochosowych bez konieczności wychodzenia z domu!\n        \n        </Opis>\n        <Opis>Najlepsze warsztaty i najlepsi mechanicy, którzy znają się na wszystkim,  co związane z autami. Umów wizytę już dziś!</Opis>\n      </RightColumn>\n\n      \n    </HomeContainer>\n\n    <FullWidthFormWrapper>\n<FormTitle>Formularz zgłoszeniowy</FormTitle>\n<FormSection>\n  <label htmlFor=\"email\">Email</label>\n  <input\n    type=\"email\"\n    id=\"email\"\n    value={email}\n    onChange={(e) => setEmail(e.target.value)}\n  />\n</FormSection>\n<FormSection>\n  <label htmlFor=\"title\">Tytuł zgłoszenia</label>\n  <input\n    type=\"text\"\n    id=\"title\"\n    value={title}\n    onChange={(e) => setTitle(e.target.value)}\n  />\n</FormSection>\n<FormSection>\n  <label htmlFor=\"description\">Opis problemu</label>\n  <textarea\n    id=\"description\"\n    rows=\"4\"\n    value={description}\n    onChange={(e) => setDescription(e.target.value)}\n  />\n</FormSection>\n<FormButton onClick={handleSubmitForm}>Wyślij zgłoszenie</FormButton>\n</FullWidthFormWrapper>\n\n      \n\n    </>\n  );\n}\n    \n\nexport default Home;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}